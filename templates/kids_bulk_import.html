{% extends "base.html" %}

{% block title %}Bulk Import Kids - JT KIDZ{% endblock %}

{% block content %}
<div class="mb-6">
    <h1 class="text-3xl font-bold text-gray-800">üìä Bulk Import Kids from Excel</h1>
    <p class="text-gray-600">Upload an Excel file to add multiple kids at once</p>
</div>

<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Upload Form -->
    <div class="bg-white rounded-lg shadow-md p-6">
        <h2 class="text-xl font-bold text-gray-800 mb-4">Upload Excel File</h2>
        
        <form method="POST" enctype="multipart/form-data">
            <div class="mb-4">
                <label for="excel_file" class="block text-sm font-medium text-gray-700 mb-2">
                    Select Excel File (.xlsx or .xls)
                </label>
                <input type="file" id="excel_file" name="excel_file" accept=".xlsx,.xls" required
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>

            <div class="flex space-x-4">
                <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg">
                    Upload & Import
                </button>
                <a href="{{ url_for('kids.list_kids') }}" class="bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-6 rounded-lg">
                    Cancel
                </a>
            </div>
        </form>
    </div>

    <!-- Instructions -->
    <div class="bg-white rounded-lg shadow-md p-6">
        <h2 class="text-xl font-bold text-gray-800 mb-4">üìã Instructions</h2>
        
        <div class="space-y-4">
            <div class="bg-blue-50 p-4 rounded-lg">
                <h3 class="font-semibold text-blue-800 mb-2">Step 1: Download Template</h3>
                <p class="text-sm text-gray-700 mb-3">
                    Download the Excel template with the correct column format
                </p>
                <a href="{{ url_for('kids.download_template') }}" 
                   class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg inline-block">
                    ‚¨áÔ∏è Download Template
                </a>
            </div>

            <div class="bg-yellow-50 p-4 rounded-lg">
                <h3 class="font-semibold text-yellow-800 mb-2">Step 2: Fill in Data</h3>
                <p class="text-sm text-gray-700 mb-2">
                    Your Excel file must have these columns:
                </p>
                <ul class="text-sm text-gray-700 list-disc list-inside space-y-1">
                    <li><strong>full_name</strong> - Full name (e.g., Juan Dela Cruz)</li>
                    <li><strong>birthday</strong> - Birthday in YYYY-MM-DD format (e.g., 2015-01-15)</li>
                    <li><strong>gender</strong> - Male or Female</li>
                    <li><strong>site</strong> - Barangay/Site name (e.g., Barangay San Pedro)</li>
                </ul>
            </div>

            <div class="bg-green-50 p-4 rounded-lg">
                <h3 class="font-semibold text-green-800 mb-2">Step 3: Upload File</h3>
                <p class="text-sm text-gray-700">
                    Select your filled Excel file and click "Upload & Import". The system will:
                </p>
                <ul class="text-sm text-gray-700 list-disc list-inside space-y-1 mt-2">
                    <li>‚úÖ Validate all data</li>
                    <li>‚úÖ Generate unique barcodes automatically</li>
                    <li>‚úÖ Create barcode images for printing</li>
                    <li>‚úÖ Calculate ages from birthdays</li>
                </ul>
            </div>

            <div class="bg-red-50 p-4 rounded-lg">
                <h3 class="font-semibold text-red-800 mb-2">‚ö†Ô∏è Important Notes</h3>
                <ul class="text-sm text-gray-700 list-disc list-inside space-y-1">
                    <li>All fields are required for each kid</li>
                    <li>Birthday format must be: YYYY-MM-DD</li>
                    <li>Gender must be exactly: Male or Female</li>
                    <li>Any rows with errors will be skipped</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="mt-6 bg-gray-50 rounded-lg p-4">
    <h3 class="font-semibold text-gray-800 mb-2">Example Excel Data:</h3>
    <div class="overflow-x-auto">
        <table class="min-w-full bg-white border border-gray-300 text-sm">
            <thead class="bg-gray-100">
                <tr>
                    <th class="px-4 py-2 border">full_name</th>
                    <th class="px-4 py-2 border">birthday</th>
                    <th class="px-4 py-2 border">gender</th>
                    <th class="px-4 py-2 border">site</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="px-4 py-2 border">Juan Dela Cruz</td>
                    <td class="px-4 py-2 border">2015-01-15</td>
                    <td class="px-4 py-2 border">Male</td>
                    <td class="px-4 py-2 border">Barangay San Pedro</td>
                </tr>
                <tr>
                    <td class="px-4 py-2 border">Maria Santos</td>
                    <td class="px-4 py-2 border">2016-06-20</td>
                    <td class="px-4 py-2 border">Female</td>
                    <td class="px-4 py-2 border">Barangay Tagburos</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
